<div class="x_panel">
    <div class="x_title">
        <h2>Relat√≥rio de documentos</h2>
        <ul class="nav navbar-right panel_toolbox">
            <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
            </li>
            <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="#">Settings 1</a>
                <a class="dropdown-item" href="#">Settings 2</a>
                </div>
            </li>
            <li><a class="close-link"><i class="fa fa-close"></i></a>
            </li>
        </ul>
        <div class="clearfix"></div>
        </div>
        <div class="x_content">

            <%= render partial: "users_backoffice/shared/bradcrumbs"%>   

            <% if current_user.profile != "Administrador" and current_user.profile != "Aprovador" %>
                <%=link_to new_users_backoffice_document_path, {:class => "btn btn-primary btn-circle", :data => { :toggle => "tooltip", :placement => "bottom" , :title => "Adicionar documento"}} do %>
                    <i class="fa fa-plus-circle" aria-hidden="true"></i>
                <% end %>
            <% end %>

            <%=link_to users_backoffice_contracts_path(:format => 'pdf'), {:class => "btn btn-danger btn-circle", :data => { :toggle => "tooltip", :placement => "bottom" , :title => "Exportar em PDF"}} do %>
                <i class="fa fa-file-pdf-o" aria-hidden="true"></i>
            <% end %>
            
            <%=link_to users_backoffice_contracts_path(:format => 'xlsx'), {:class => "btn btn-success btn-circle", :data => { :toggle => "tooltip", :placement => "bottom" , :title => "Exportar em EXCEL"}}  do %>
                <i class="fa fa-file-excel-o" aria-hidden="true"></i>
            <% end %>
            
            <table id="datatable-responsive" class="table table-striped table-bordered dt-responsive nowrap display" cellspacing="0" width="100%">
                <thead>
                    <th><%= trans_attr(@documents, :description) %></th>
                    <th><%= trans_attr(@documents, :finality) %></th>
                    <th><%= trans_attr(@documents, :type_document) %></th>
                    <th><%= trans_attr(@documents, :created_at) %></th>
                    <th></th>
                </thead>
                <tbody>
                    <% @documents.each do |document| %>
                        <tr>
                            <td><%= document.description%></td>
                            <td><%= document.finality %></td>
                            <td><%= document.type_document %></td>
                            <td><%= I18n.l(document.created_at, format: :short) %></td>
                            <td>
                                <%=link_to users_backoffice_document_path(document), method: :delete, class:"btn btn-danger btn-circle", data: { confirm: "Tem certeza que quer excluir?" } do %>
                                    <i class="fa fa-minus-circle" aria-hidden="true"></i>
                                <% end %>
                            
                                <%=link_to edit_users_backoffice_document_path(document), class:"btn btn-warning btn-circle" do %>
                                    <i class="fa fa-pencil" aria-hidden="true"></i>
                                <% end %>
                                
                                <% if document.file.attached? %>
                                    <%=link_to rails_blob_path(document.file, disposition: "attachment"), class:"btn btn-primary btn-circle" do %>
                                        <i class="fa fa-download" aria-hidden="true"></i>
                                    <% end %>
                                <% end %>
                                
                                <% if current_user.profile == "Administrador" %>
                                    <%=link_to users_backoffice_visibility_configuration_path(document_id: document.id), class:"btn btn-success btn-circle", "data-toogle":"modal", "data-target":"#document_visibility_mode", remote: true do %>
                                        <i class="fa fa-eye" aria-hidden="true"></i>
                                    <% end %>
                                <% end %>
                            </td>
                        </tr>
                    <% end %>
                </tbody>
            </table>

            <div class="modal fade" id="modal_document" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            </div>
        </div>
    </div>
</div>